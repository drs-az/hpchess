<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wizard's Chess</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chessboard.js/1.0.0/chessboard.min.css">
  <style>
    html, body { height:100%; margin:0; padding:0; }
    body { background:url('https://wallpapercat.com/w/full/0/2/9/2164066-3000x1688-desktop-hd-hogwarts-castle-background.jpg') center/cover no-repeat fixed; font-family:'Cinzel', serif; color:#f5f1e8; }
    #game { padding:20px; background:rgba(0,0,0,0.6); max-width:600px; margin:40px auto; border-radius:8px; }
    .info { display:flex; justify-content:space-between; align-items:center; }
    .player { background:rgba(255,255,255,0.1); padding:8px; border-radius:6px; width:45%; text-align:center; }
    #timer { font-size:1.2rem; }
    #board { width:480px; margin:20px auto; box-shadow:0 0 20px rgba(0,0,0,0.7); }
  </style>
</head>
<body>
  <div id="game">
    <h1>Wizard's Chess</h1>
    <div class="info">
      <div class="player" id="leftPlayer"></div>
      <div id="timer">--:--</div>
      <div class="player" id="rightPlayer"></div>
    </div>
    <div id="board"></div>
  </div>  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/1.0.0/chess.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/chessboard.js/1.0.0/chessboard.min.js"></script>  <script>
    // Parse URL params
    const params = new URLSearchParams(window.location.search);
    const p1Name = params.get('p1Name') || 'Player 1';
    const p2Name = params.get('p2Name') || 'Player 2';
    const p1House = params.get('p1House') || '';
    const p2House = params.get('p2House') || '';

    // Display names/houses
    $('#leftPlayer').text(`${p1Name} (${p1House}) - White`);
    $('#rightPlayer').text(`${p2Name} (${p2House}) - Black`);

    // Chess setup
    let game = new Chess();
    let board = Chessboard('board', {
      draggable: true,
      position: 'start',
      onDragStart: (source, piece) => {
        if (game.game_over()) return false;
        if ((game.turn() === 'w' && piece.startsWith('b')) || (game.turn() === 'b' && piece.startsWith('w'))) return false;
      },
      onDrop: (source, target) => {
        const move = game.move({ from: source, to: target, promotion: 'q' });
        if (!move) return 'snapback';
        currentColor = game.turn() === 'w' ? 'black' : 'white';
        startTimer();
        if (game.game_over()) { clearInterval(timerInterval); alert('Game over!'); }
      },
      onSnapEnd: () => board.position(game.fen()),
      pieceTheme: piece => `https://cdnjs.cloudflare.com/ajax/libs/chessboard.js/1.0.0/img/chesspieces/wikipedia/${piece}.png`
    });

    // Timer
    let timerInterval, timeLeft = 10 * 60, currentColor = 'white';
    function updateTimer() {
      const m = String(Math.floor(timeLeft/60)).padStart(2,'0');
      const s = String(timeLeft%60).padStart(2,'0');
      $('#timer').text(`${m}:${s}`);
      if (timeLeft<=0) { clearInterval(timerInterval); alert((currentColor==='white'?p2Name:p1Name)+' wins by timeout!'); }
      timeLeft--;
    }
    function startTimer() { clearInterval(timerInterval); timeLeft=10*60; timerInterval = setInterval(updateTimer,1000); }
    startTimer();
  </script></body>
</html>